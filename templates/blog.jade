extends header

block prepend title
  | Blog - 

block content
  - var articleTitles = [];
  - for(var i = 0; i < articles.length; i++) {
  -     articleTitles.push("\"" + articles[i].title + "\"");
  - }
  
  - var articleUrls = [];
  - for(var i = 0; i < articles.length; i++) {
  -     articleUrls.push("\"" + articles[i].url + "\"");
  - }
  
  .blog(ng-controller="blogController as ctrl" ng-init="createHideObject([" + articleTitles + "])")
    md-toolbar(layout="row" flex layout-align="center")
      .md-toolbar-tools
        span(flex)
        md-autocomplete(
            ng-disabled="ctrl.isDisabled"
            md-no-cache="ctrl.noCache"
            md-selected-item="ctrl.selectedItem"
            md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
            md-search-text="ctrl.searchText"
            md-selected-item-change="ctrl.selectedItemChange(item, [" + articleUrls + "])"
            md-items="item in ctrl.querySearch(ctrl.searchText, [" + articleTitles + "])"
            md-item-text="item.display"
            md-min-length="0"
            placeholder="Search blog posts...")
          md-item-template
            span.autocomplete-text(md-highlight-text="ctrl.searchText" md-highlight-flags="^i") {{item.display}}
          md-not-found
            | No blog posts matching "{{ctrl.searchText}}" were found.
    #post.flow-text
      each article in articles
        - console.log(article)
        .flex
          md-card.no-shadow.transparent(ng-hide="hideObject[\"" + article.title + "\"]")
            md-card-title
              md-card-title-text
                h2
                  .inline
                    a(href=article.url)= article.title
                  hr.pink-hr          
            md-card-content
              section.content
                if article.intro.length > 0
                  != typogr(article.intro).typogrify()           